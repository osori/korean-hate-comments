{"ast":null,"code":"var _jsxFileName = \"/home/ilkyu/akpl/src/components/HatePredictContainer.tsx\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { IonCard, IonList, IonCardTitle, IonTextarea, IonItem, IonLabel, IonButton, IonCardSubtitle, IonListHeader, IonItemDivider } from '@ionic/react';\n\nconst HatePredictContainer = ({\n  name\n}) => {\n  const exampleComment = {\n    id: 0,\n    text: \"싹쓰리 너무 좋아요~\",\n    prob: 0.053938716650009155\n  };\n  const exampleComment2 = {\n    id: 1,\n    text: \"솔직히 싹쓰리 안 나왔으면 좋겠다\",\n    prob: 0.6329404711723328\n  };\n  const exampleComment3 = {\n    id: 2,\n    text: \"싹쓰리 죽어라 노래도 못하는 것들이 어디서 BTS를 이기겠다고\",\n    prob: 0.9337946772575378\n  };\n  const [text, setText] = useState();\n  const [history, setHistory] = useState([exampleComment, exampleComment2, exampleComment3]);\n  const [busy, setBusy] = useState(false);\n  const API_URL = 'http://akpl.ilkyu.kr:8080/predict/';\n\n  const getBgColor = prob => {\n    if (prob < 0.5) {\n      return \"secondary\";\n    } else if (prob < 0.6) {\n      return \"success\";\n    } else if (prob < 0.7) {\n      return \"warning\";\n    } else {\n      return \"danger\";\n    }\n  };\n\n  const predictComment = () => {\n    if ((text === null || text === void 0 ? void 0 : text.length) == 0) {\n      return;\n    }\n\n    setBusy(true);\n    axios.get(API_URL + text).then(resp => resp.data).then(data => {\n      let prob = data.prob;\n      let comment = {\n        id: history.length,\n        text: text,\n        prob: prob\n      };\n      setHistory([comment, ...history]);\n      setText(\"\");\n      console.log(history);\n    });\n    setBusy(false);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, name), /*#__PURE__*/React.createElement(IonItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(IonLabel, {\n    position: \"floating\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, \"\\uBB38\\uC7A5\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\"), /*#__PURE__*/React.createElement(IonTextarea, {\n    value: text,\n    placeholder: \"\\uC2F9\\uC4F0\\uB9AC \\uB108\\uBB34 \\uC88B\\uC544\\uC694~~\",\n    onIonChange: e => setText(e.detail.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(IonButton, {\n    onClick: predictComment,\n    disabled: busy,\n    expand: \"block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }, \"\\uD610\\uC624 \\uAC80\\uC0AC\"), /*#__PURE__*/React.createElement(IonItemDivider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(IonListHeader, {\n    lines: \"full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 23\n    }\n  }, \"\\uAC80\\uC0AC \\uAE30\\uB85D\"))), /*#__PURE__*/React.createElement(IonList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, history.map((comment, i) => /*#__PURE__*/React.createElement(IonCard, {\n    key: i,\n    color: getBgColor(comment.prob),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonCardTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, comment.text), /*#__PURE__*/React.createElement(IonCardSubtitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, comment.prob)))));\n};\n\nexport default HatePredictContainer;","map":{"version":3,"sources":["/home/ilkyu/akpl/src/components/HatePredictContainer.tsx"],"names":["React","useState","axios","IonCard","IonList","IonCardTitle","IonTextarea","IonItem","IonLabel","IonButton","IonCardSubtitle","IonListHeader","IonItemDivider","HatePredictContainer","name","exampleComment","id","text","prob","exampleComment2","exampleComment3","setText","history","setHistory","busy","setBusy","API_URL","getBgColor","predictComment","length","get","then","resp","data","comment","console","log","e","detail","value","map","i"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\n\nimport { IonGrid, IonCol, IonRow, IonCard, IonList, IonCardTitle, IonTextarea, IonItem, IonLabel, IonButton, IonCardHeader, IonCardSubtitle, IonContent, IonListHeader, IonItemDivider } from '@ionic/react';\n\ninterface ContainerProps {\n  name: string;\n}\n\ninterface Comment {\n    id: number;\n    text?: string;\n    prob: number;\n}\n\n\nconst HatePredictContainer: React.FC<ContainerProps> = ({ name }) => {\n  const exampleComment:Comment = {\n      id:0,\n      text: \"싹쓰리 너무 좋아요~\",\n      prob: 0.053938716650009155,\n  }\n  const exampleComment2:Comment = {\n    id:1,\n    text: \"솔직히 싹쓰리 안 나왔으면 좋겠다\",\n    prob: 0.6329404711723328,\n  }\n  const exampleComment3:Comment = {\n    id:2,\n    text: \"싹쓰리 죽어라 노래도 못하는 것들이 어디서 BTS를 이기겠다고\",\n    prob: 0.9337946772575378,\n  }\n\n\n  const [text, setText] = useState<string>();\n  const [history, setHistory] = useState<Comment[]>([exampleComment, exampleComment2, exampleComment3]);\n  const [busy, setBusy] = useState<boolean>(false);\n\n  const API_URL = 'http://akpl.ilkyu.kr:8080/predict/';\n\n  const getBgColor = (prob:number) => {\n    if (prob < 0.5){\n        return \"secondary\"\n    } else if (prob < 0.6){\n        return \"success\"\n    } else if (prob < 0.7){\n        return \"warning\"\n    } else {\n        return \"danger\"\n    }\n  }\n\n  const predictComment = () => {\n    if (text?.length == 0 ){\n        return;\n    }\n    setBusy(true)\n    axios.get(API_URL + text).then(resp => resp.data)\n        .then((data) => {\n            let prob = data.prob;\n            let comment = {\n                id: history.length,\n                text: text,\n                prob: prob\n            }    \n            \n            setHistory([comment, ...history])\n            setText(\"\");\n            console.log(history)\n        })\n        setBusy(false)\n\n  }\n\n  return (\n    <div className=\"container\">\n      <strong>{name}</strong>\n      <IonItem>\n        <IonLabel position=\"floating\">문장을 입력하세요</IonLabel>\n        <IonTextarea \n            value={text} \n            placeholder=\"싹쓰리 너무 좋아요~~\"\n            onIonChange={e => setText(e.detail.value!)}\n        ></IonTextarea>\n      </IonItem>\n      <IonButton onClick={predictComment} disabled={busy} expand=\"block\">혐오 검사</IonButton>\n\n      <IonItemDivider>\n\n      </IonItemDivider>\n      \n        <IonListHeader lines=\"full\">\n            <IonLabel><h1>검사 기록</h1></IonLabel>\n        </IonListHeader>\n              <IonList>\n          {history.map((comment, i) => (\n            <IonCard key={i} color={getBgColor(comment.prob)}>\n                <IonCardTitle>\n                    {comment.text}\n                </IonCardTitle>\n                <IonCardSubtitle>\n                    {comment.prob}\n                </IonCardSubtitle>\n            </IonCard>\n          ))}\n      </IonList>\n\n    </div>\n  );\n};\n\nexport default HatePredictContainer;\n"]},"metadata":{},"sourceType":"module"}