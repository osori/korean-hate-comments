{"ast":null,"code":"var _jsxFileName = \"/home/ilkyu/akpl/src/components/HatePredictContainer.tsx\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { IonCard, IonList, IonCardTitle, IonTextarea, IonItem, IonLabel, IonButton, IonCardSubtitle } from '@ionic/react';\n\nconst HatePredictContainer = ({\n  name\n}) => {\n  const [text, setText] = useState();\n  const [history, setHistory] = useState([]);\n  const [busy, setBusy] = useState(false);\n  const API_URL = 'http://akpl.ilkyu.kr:8080/predict/';\n\n  const getBgColor = prob => {\n    let hue = ((1 - prob) * 120).toString(10);\n    return [\"hsl(\", hue, \",100%,50%)\"].join(\"\");\n  };\n\n  const predictComment = () => {\n    setBusy(true);\n    axios.get(API_URL + text).then(resp => resp.data).then(data => {\n      let prob = data.prob;\n      let comment = {\n        id: history.length,\n        text: text,\n        prob: prob\n      };\n      setHistory([...history, comment]);\n      setText(\"\");\n      console.log(history);\n      setBusy(false);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, name), /*#__PURE__*/React.createElement(IonItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(IonLabel, {\n    position: \"floating\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(IonTextarea, {\n    value: text,\n    onIonChange: e => setText(e.detail.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(IonButton, {\n    onClick: predictComment,\n    disabled: busy,\n    expand: \"block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, \"\\uD610\\uC624 \\uAC80\\uC0AC\"), /*#__PURE__*/React.createElement(IonList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, history.map((comment, i) => /*#__PURE__*/React.createElement(IonCard, {\n    key: i,\n    style: \"background:{getBgColor(comment.prob)}\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonCardTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, comment.text), /*#__PURE__*/React.createElement(IonCardSubtitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, comment.prob)))));\n};\n\nexport default HatePredictContainer;","map":{"version":3,"sources":["/home/ilkyu/akpl/src/components/HatePredictContainer.tsx"],"names":["React","useState","axios","IonCard","IonList","IonCardTitle","IonTextarea","IonItem","IonLabel","IonButton","IonCardSubtitle","HatePredictContainer","name","text","setText","history","setHistory","busy","setBusy","API_URL","getBgColor","prob","hue","toString","join","predictComment","get","then","resp","data","comment","id","length","console","log","e","detail","value","map","i"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\n\nimport { IonCard, IonList, IonCardTitle, IonTextarea, IonItem, IonLabel, IonButton, IonCardHeader, IonCardSubtitle, IonContent } from '@ionic/react';\n\ninterface ContainerProps {\n  name: string;\n}\n\ninterface Comment {\n    id: number;\n    text?: string;\n    prob: number;\n}\n\n\nconst HatePredictContainer: React.FC<ContainerProps> = ({ name }) => {\n  const [text, setText] = useState<string>();\n  const [history, setHistory] = useState<Comment[]>([]);\n  const [busy, setBusy] = useState<boolean>(false);\n\n  const API_URL = 'http://akpl.ilkyu.kr:8080/predict/';\n\n  const getBgColor = (prob:number) => {\n    let hue=((1-prob)*120).toString(10);\n    return [\"hsl(\",hue,\",100%,50%)\"].join(\"\");\n  }\n\n  const predictComment = () => {\n    setBusy(true)\n    axios.get(API_URL + text).then(resp => resp.data)\n        .then((data) => {\n            let prob = data.prob;\n            let comment = {\n                id: history.length,\n                text: text,\n                prob: prob\n            }    \n            \n            setHistory([...history, comment])\n            setText(\"\");\n            console.log(history)\n            setBusy(false)\n        })\n  }\n\n  return (\n    <div className=\"container\">\n      <strong>{name}</strong>\n      <IonItem>\n        <IonLabel position=\"floating\">Description</IonLabel>\n        <IonTextarea \n            value={text} \n            onIonChange={e => setText(e.detail.value!)}\n        ></IonTextarea>\n      </IonItem>\n      <IonButton onClick={predictComment} disabled={busy} expand=\"block\">혐오 검사</IonButton>\n      <IonList>\n          {history.map((comment, i) => (\n            <IonCard key={i} style=\"background:{getBgColor(comment.prob)}\">\n                <IonCardTitle>\n                    {comment.text}\n                </IonCardTitle>\n                <IonCardSubtitle>\n                    {comment.prob}\n                </IonCardSubtitle>\n            </IonCard>\n          ))}\n      </IonList>\n    </div>\n  );\n};\n\nexport default HatePredictContainer;\n"]},"metadata":{},"sourceType":"module"}